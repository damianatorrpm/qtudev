language: c

compiler:
  - clang
  - gcc

sudo: required

services:
  - docker

env:
  global:
    # DEPLOY_USER
    - secure: "GiYBEihaUGTPcTXMKlUbLnyuw7NavE0KWzZgz3rXlHhYHF7M/K7JWR0QQaWGx8cAR/wMv08ATsf2b5MilriPYQnd6kCMyLrP1YzoHMIKaSm7tWhmcE75WZ44IQdXS+mXIPpIDSKToH5dGFTz87hpMm58vgNnMwXj8xaWr4XM63IRGZwLbBXN6sUCTYhJ3j/suVfc092HjGTSTwlwjdaw93oJI4Cz55Q54ahtSRuIWdcnMIJbW5hbeSHC+LcVLYEnbkfB4LACNVK4Dvn6wXDFvTbZKy+tjTJjInXCo19KG+Blrm3C5iPG3N+pwIe8DB1ItuR1b+iRmtqOyi5/ktVE3NMgc73hteZdeNoAOTIqmzGL+QNjlhqeyRHcnlSKdPrw3d2Axz/cwagmwQmCebD5NnYr95fiyS4xtcUmrgJdGNA5HEKKwunhyfTFXWELMUAM1olh7lBUN9FlklCDDP79k3+GCYTwPJrYnRdqcMBiks3RylQbAWcqdffXYZVU5MaTC+NUQaIiXi7trZCkwiv5kl0KsO9uqiy9gyL6nJjdWzbT4ZGeRszMFzJ3zw5k62yAtwFvuQCBg7Rqs74LWF/N5NyUuunlxKNzz4Ey/MHJQE8qnqBWH4QQ90Z5NjCFnxOVG8EUAsdQlwUZEIAOZilUJpG7gmOCndJRse52e87Lv/0="
    # DEPLOY_HOST
    - secure: "u658J9rJFOB0fv9u/Rjzr3vLP9BCZt+MitGrkNzeJzl3xBmx1QExqmm4HDCkc4+ZxqC8rfJ3OEVxMFiaqqzE3q57Lf5CejvLmzS8hFeE6+6WbKDNQuWsWvTZmi6I9fnz64EFX2gUuq8JtWUNPAYfc2sVE0K2Vl0pkNV+e7mifgqQg4dFf5TOrf1fUTnMoAre+jOWZkp2Ffr01imjstSqQDwlYRGtNtFB2SMe701mpGUOUvali1HQzOp7s26AIs2fW+tHJGtodKm8Adx0e6fGsrSzm1PxM1/HR4nNeBHltQXzmoK+5Am/wJMVpt+ep1YHsOJBmJYhm0mjAVj+9c0DcXD8iSX8tzvfyEFfN9U6YcovAUa2Jx4zrSj3TFJeJI8A4VaAzbyxlNrJko2+nL9lqU77Jycf2wvqDkoDIcATZtlYbaCY0fC4/sjqSgU6bwkt3mMkibXFt43hFBnLEyYE8/LAiW6qThqHT1fCYtVS6E/sFaD7Q3bPfqdU5ALFjWogJeLsIb5QdanIDdLEIZ4iDvSZnd46a8ipaqRB3B1WPPvBOjzAI3W+To7ZjPc6pK+l2cb6XxWC+K4rKR4vMDXfPUG7zcxKW/vH7nhC8IohyFYeqjR9n8N+q6d+MmSWPi3O1atzdOD5DZFY+uHsjf3K1bTu8gIe/cIoyJfTnWSI3Gc="

branches:
  except:
    - /^(?i:continuous)$/

script:
  - wget -c https://raw.githubusercontent.com/lirios/infra-travis/master/run
  - bash run ./.travis/build.sh

deploy:
  - provider: script
    script: .travis/deploy.sh build/default/qtudev-artifacts.tar.gz
    skip_cleanup: true
    on:
      branch: master
      condition: "$CC = gcc) && ($TRAVIS_PULL_REQUEST = false"
  - provider: script
    script: .travis/deploy.sh build/default/qtudev-artifacts.tar.gz
    skip_cleanup: true
    on:
      branch: develop
      condition: "$CC = gcc) && ($TRAVIS_PULL_REQUEST = false"

notifications:
  email: false
  slack: lirios:fdUqVmPzqPskEL1UBhqapZ0w
